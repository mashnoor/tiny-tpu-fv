# =============================================================================
# JasperGold Formal Verification Script for PE Module
# Usage: cd formal && jg -allow_unsupported_OS -fpv -no_gui -tcl pe_verify.tcl
# =============================================================================

puts "\n=========================================="
puts "Formal Verification of PE Module"
puts "==========================================\n"

# =========================================================================
# Design Analysis
# =========================================================================
puts "Analyzing design files..."

analyze -sv ../src/fixedpoint.sv
analyze -sv ../src/pe.sv

# =========================================================================
# Elaboration
# =========================================================================
puts "Elaborating design..."

elaborate -top pe

# =========================================================================
# Clock and Reset
# =========================================================================
puts "Setting up clock and reset..."
clock clk
reset rst

# =========================================================================
# Load assertions from separate file
# =========================================================================
puts "\nAdding assertions..."
source pe_assertions.tcl

# =========================================================================
# Prove Assertions
# =========================================================================
puts "\n=========================================="
puts "Proving Assertions"
puts "==========================================\n"

prove -all

exit
